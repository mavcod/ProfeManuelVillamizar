<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ejercicio 3 - Sumas y Restas Avanzadas</title>
<link rel="stylesheet" href="css/estilo.css">
</head>
<body>
<div class="container">
    <h2>Ejercicio 3: Sumas y Restas con Paréntesis</h2>
    <label>Nombre del estudiante:</label>
    <input type="text" id="nombre" placeholder="Escribe tu nombre">
    <div>
        <label>Tiempo restante: </label>
        <span id="reloj">05:00</span>
    </div>
    <div id="pregunta"></div>
    <input type="text" id="respuesta" placeholder="Escribe tu respuesta">
    <button id="btnValidar">Validar respuesta</button>
    <div id="mensaje"></div>
    <div id="aciertosContador">Aciertos: 0 / 5</div>

    <p><a href="index.html">⬅ Volver al menú principal</a></p>
</div>

<script>
const preguntasEj3 = [
    {"pregunta":"-4 + (-5) + 3 - (-2)","respuesta":"-4"},
    {"pregunta":"6 - (-3) + (-2) - 5","respuesta":"4"},
    {"pregunta":"-7 - (-4) + 6 + (-3)","respuesta":"0"},
    {"pregunta":"8 + (-2) - (-5) + (-3)","respuesta":"8"},
    {"pregunta":"9 - (-6) + 2 - (-4)","respuesta":"21"},
    {"pregunta":"-5 + (-7) - (-3) + 4","respuesta":"-5"},
    {"pregunta":"7 - (-2) + (-5) - (-1)","respuesta":"5"},
    {"pregunta":"-3 + 6 - (-4) + (-2)","respuesta":"5"},
    {"pregunta":"4 - (-3) + (-6) - 2","respuesta":"-1"},
    {"pregunta":"-6 + (-2) - (-5) + 3","respuesta":"0"},
    {"pregunta":"5 - (-4) + (-3) - (-2)","respuesta":"8"},
    {"pregunta":"-8 + (-1) + 7 - (-3)","respuesta":"1"},
    {"pregunta":"3 - (-5) + (-4) - (-6)","respuesta":"10"},
    {"pregunta":"-2 + (-3) + 5 - (-1)","respuesta":"1"},
    {"pregunta":"6 - (-2) + (-7) - 4","respuesta":"-3"},
    {"pregunta":"-9 + (-2) + 3 - (-6)","respuesta":"-2"},
    {"pregunta":"7 - (-3) + (-1) - (-5)","respuesta":"14"},
    {"pregunta":"-4 + (-6) - (-2) + 1","respuesta":"-7"},
    {"pregunta":"5 - (-5) + (-3) - (-4)","respuesta":"11"},
    {"pregunta":"-7 + (-3) + 6 - (-2)","respuesta":"-2"},
    {"pregunta":"8 - (-4) + (-5) - 3","respuesta":"4"},
    {"pregunta":"-3 + (-7) + 2 - (-1)","respuesta":"-7"},
    {"pregunta":"6 - (-5) + (-4) - (-2)","respuesta":"9"},
    {"pregunta":"-2 + (-6) - (-3) + 5","respuesta":"0"},
    {"pregunta":"4 - (-2) + (-7) - (-1)","respuesta":"0"},
    {"pregunta":"-5 + (-3) + 4 - (-6)","respuesta":"2"},
    {"pregunta":"7 - (-1) + (-5) - (-3)","respuesta":"6"},
    {"pregunta":"-6 + (-2) - (-4) + 3","respuesta":"-1"},
    {"pregunta":"5 - (-3) + (-6) - (-2)","respuesta":"4"},
    {"pregunta":"-4 + (-5) + 3 - (-1)","respuesta":"-5"},
    {"pregunta":"6 - (-2) + (-3) - (-4)","respuesta":"9"},
    {"pregunta":"-7 + (-1) - (-5) + 2","respuesta":"-1"},
    {"pregunta":"8 - (-3) + (-6) - (-2)","respuesta":"7"},
    {"pregunta":"-3 + (-4) + 5 - (-2)","respuesta":"0"},
    {"pregunta":"7 - (-2) + (-1) - (-3)","respuesta":"11"},
    {"pregunta":"-5 + (-6) - (-2) + 4","respuesta":"-5"},
    {"pregunta":"6 - (-4) + (-3) - (-1)","respuesta":"8"},
    {"pregunta":"-2 + (-5) + 7 - (-3)","respuesta":"3"},
    {"pregunta":"5 - (-3) + (-4) - (-2)","respuesta":"6"},
    {"pregunta":"-6 + (-1) - (-5) + 3","respuesta":"1"},
    {"pregunta":"8 - (-2) + (-6) - (-4)","respuesta":"8"},
    {"pregunta":"-3 + (-7) + 2 - (-5)","respuesta":"-3"},
    {"pregunta":"7 - (-1) + (-3) - (-2)","respuesta":"7"},
    {"pregunta":"-4 + (-2) - (-6) + 5","respuesta":"5"},
    {"pregunta":"6 - (-3) + (-5) - (-1)","respuesta":"5"},
    {"pregunta":"-5 + (-4) + 3 - (-2)","respuesta":"-4"},
    {"pregunta":"9 - (-2) + (-6) - (-3)","respuesta":"8"},
    {"pregunta":"-6 + (-3) - (-2) + 4","respuesta":"-3"},
    {"pregunta":"5 - (-5) + (-4) - (-1)","respuesta":"7"},
    {"pregunta":"-7 + (-2) + 6 - (-3)","respuesta":"0"},
    {"pregunta":"8 - (-1) + (-5) - (-2)","respuesta":"6"},
    {"pregunta":"-3 + (-6) - (-4) + 2","respuesta":"-3"},
    {"pregunta":"6 - (-4) + (-2) - (-5)","respuesta":"13"},
    {"pregunta":"-2 + (-5) + 4 - (-3)","respuesta":"0"},
    {"pregunta":"7 - (-3) + (-1) - (-6)","respuesta":"15"},
    {"pregunta":"-5 + (-2) - (-3) + 4","respuesta":"0"},
    {"pregunta":"8 - (-5) + (-6) - (-1)","respuesta":"8"},
    {"pregunta":"-4 + (-3) + 7 - (-2)","respuesta":"2"},
    {"pregunta":"6 - (-1) + (-5) - (-3)","respuesta":"5"},
    {"pregunta":"-3 + (-2) - (-6) + 5","respuesta":"6"}
];

let aciertos = 0;
let preguntaActual;

function iniciarPrueba() {
    aciertos = 0;
    document.getElementById('aciertosContador').innerText = `Aciertos: ${aciertos} / 5`;
    mostrarPregunta();
    iniciarReloj(5 * 60); // 5 minutos
}

function mostrarPregunta() {
    preguntaActual = preguntasEj3[Math.floor(Math.random() * preguntasEj3.length)];
    document.getElementById('pregunta').innerText = preguntaActual.pregunta;
    document.getElementById('respuesta').value = '';
    document.getElementById('mensaje').innerText = '';
    document.getElementById('respuesta').focus();
}

function validarRespuesta() {
    const respuestaUsuario = document.getElementById('respuesta').value.trim();
    if (respuestaUsuario === preguntaActual.respuesta) {
        aciertos++;
        document.getElementById('aciertosContador').innerText = `Aciertos: ${aciertos} / 5`;
        document.getElementById('mensaje').innerText = '¡Correcto!';
        if (aciertos >= 5) {
            document.getElementById('mensaje').innerText = '¡Prueba superada!';
        } else {
            setTimeout(mostrarPregunta, 800);
        }
    } else {
        document.getElementById('mensaje').innerText = 'Respuesta incorrecta';
    }
}

document.getElementById('btnValidar').addEventListener('click', validarRespuesta);
document.getElementById('respuesta').addEventListener('keypress', function(e) {
    if (e.key === 'Enter') validarRespuesta();
});

function iniciarReloj(segundos) {
    let tiempo = segundos;
    const reloj = document.getElementById('reloj');
    const intervalo = setInterval(() => {
        let min = Math.floor(tiempo / 60);
        let seg = tiempo % 60;
        reloj.textContent = `${min.toString().padStart(2,'0')}:${seg.toString().padStart(2,'0')}`;
        if (tiempo <= 0) {
            clearInterval(intervalo);
            alert('Se acabó el tiempo, reiniciando la prueba');
            iniciarPrueba();
        }
        tiempo--;
    }, 1000);
}

window.onload = iniciarPrueba;
</script>
</body>
</html>
